<link rel="stylesheet" href="./assets/pages/groups.css"/>
<link rel="stylesheet" href="./assets/parts/credentials.css"/>

<webc-container controller="groups/GroupsController" id="groups-page" class="dw-container">

    <main id="dw-groups">
        <section class="dw-groups--header">
            <dw-title header="Groups"></dw-title>
            <span> > </span>
            <div class="custom-select">
                <select class="group-select dw-select" data-for="@groups" data-for-option="rerender">
                    <option value="@pk">{{@name}}</option>
                </select>
            </div>
        </section>

    </main>
    <section id="dw-group-content">
        <!-- Group content is injected here -->
    </section>
</webc-container>

<!-- Group content -->
<template id="dw-group-content--template">
    <webc-container controller="groups/GroupFeaturesController">
        <sl-tab-group class="dw-group-content">
            <sl-tab slot="nav" panel="members">
                <sl-icon name="people-fill"></sl-icon>
                Members
            </sl-tab>

            <sl-tab-panel name="members">
                <section id="dw-group-members">
                    <!-- Group members are injected here -->
                </section>
            </sl-tab-panel>


        </sl-tab-group>
    </webc-container>
</template>

<!-- Group members -->
<template id="dw-group-members--template">
    <webc-container controller="groups/MembersController">
        <section class="dw-members--header">
            <dw-title>
                <p slot="subheader">Manage members of group "{{ @selectedGroup.name }}"</p>
            </dw-title>
            <div data-loaded="@areMembersLoaded">
                <sl-form>
                    <sl-input label="Member DID" name="did" placeholder="did:ssi:name:domain:<username>"
                              id="add-member-input" required clearable>
                        <sl-button slot="suffix" type="text" data-tag="member.paste" class="dw-paste">
                            Paste
                        </sl-button>
                    </sl-input>
                    <sl-button type="primary" data-tag="member.add" class="dw-action-button"> Add member
                        <sl-icon slot="prefix" name="plus-lg"></sl-icon>
                    </sl-button>
                </sl-form>

            </div>
        </section>

        <section class="dw-members dw-data-grid" data-for="@members">
            <article class="dw-data-grid-item">
                <sl-menu-item value="@did" data-tag="member.select">
                    <div>
                        <div><strong>{{ @username }}</strong> &nbsp; {{ @email }}</div>
                        <div><code>{{ @did }}</code></div>
                    </div>
                </sl-menu-item>

                <div class="tooltip">
                    <sl-icon-button data-tag="member.delete" name="trash"></sl-icon-button>
                    <span class="tooltiptext">Delete group member</span>
                </div>

            </article>
            <div slot="no-data" data-if="@areMembersLoaded" class="no-data">
                <dw-spinner slot="false" content="Members are loading"></dw-spinner>
                <p slot="true">There are no members in this group!</p>
            </div>
        </section>

        <section id="dw-member-content">
            <!-- Member content is injected here -->
        </section>
    </webc-container>
</template>

